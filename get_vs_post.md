### GET和POST到底有什么区别？

​	这个问题看起来很初级，但是实际上却涉及到方方面面，这就是为啥面膜你是老特么喜欢这个问题了，能真的说明白的真的比较少。



​	HTTP最早用来做浏览器与服务器之间交互HTML和表单的通讯协议；后来又呗广泛的扩充到接口格式的定义上。所以在讨论GET和POST区别时候，需要确定下到底是浏览器使用的GET和POST还是HTTP作为接口传输协议的场景。



#### 浏览器的GET和POST

​	这里特指浏览器中的非AJAX的HTTP请求，即从HTML和浏览器诞生就一直使用的HTTP协议中的GET/POST。浏览器用GET请求来获取一个html页面/图片/css/js等资源；用POST来提交一个<form>表单，并得到一个结果的网页。

​	浏览器将GET和POST请求定义为：

##### GET

​	‘读取’一个资源。比如Get到一个html文件。反复读取不应该对访问的数据有副作用。比如‘GET’一下，用户就下单了，返回订单已经受理，这是不可接受的【这谁顶得住啊】

​	**没有副作用被称为‘’幂等‘（idempotent）**

​	因为GET是读取，就可以对get请求的数据做**缓存**，这个缓存可以做到浏览器本身上——**彻底避免浏览器发请求**，也可以做到代理上——**nginx**，或者做到sever段——**Etag，至少可以减少带宽消耗**



##### POST

​	在页面里<form>标签会定义一个表单。点击其中的submit元素会发出一个POST请求让服务器做点事。这件事往往是有**副作用**的。

​	**有副作用是不’幂等‘**

​	**不幂等也就意味着不能随意多次执行。因此也就不能缓存**。因为post可能有副作用，所以浏览器实现为不能把POST请求保存为标签——点一下标签就下一个单，这谁顶得住啊？

​	此外，如果尝试重新执行POST请求，浏览器也会弹一个框提示这个刷新可能会有副作用，询问要不要继续。



​	当然了，服务器的开发者完全可以把GET实现为有副作用；把POST实现为没有副作用。只不过和浏览器的预期不符。**把GET请求实现为有副作用是个很可怕的事情**。之前百度贴吧有一个因为使用get请求可以修改管理员权限而造成的安全漏洞。反过来，把没有副作用的请求用POST实现，浏览器还是会弹框，对用户体验好处改善不大。

​	

​	但是后边可以看到，**将HTTP POST作为接口形式使用时，就没有这种弹框了。于是把一个POST请求实现为幂等就有实际意义了**。**POST幂等能让很多业务的前后端交互更加顺畅，以及避免一些因为前端的BUG，触控失误等带来的重复提交**。将一个有副作用的操作实现为幂等**必须重业务上能定义初怎么就算是’重复‘**。如果提交数据中增加一个dedupkey在一个交易会话中有效，或者利用提交的数据里可以天然当dedupkey的字段。这样万一用户强行重复提交，服务器端也可以做一次防护。

​	**ps：dedupkey：使用一个由客户端生成的，可用于避免重复的key**，俗称**dedup key**（deduplicate key之意），这个key可以用任意可以保证全局唯一性的方式生成，比如uuid。客户端和服务器需要使用这个dedup key作为串联条件，一起解决去重问题。

​	

​	GET和POST携带数据的格式也有区别。当浏览器发出一个GET请求时，就意味着要么时用户自己在浏览器地址栏输入，要么就是点击了html里的a标签的href中的url。所以其实并不是GET只能用url，而是浏览器直接发出的GET只能由一个url触发。所以没得办法，get上要在url之外带一些参数就只能依靠url上附带querystring。但是HTTP协议本身并没有这个限制。



​	浏览器的POST请求都来自表单提交。每次提交，表单的数据被浏览器用编码到HTTP请求的body里。浏览器发出的POST请求的body主要有两种格式，**一种是application/x-www-form-urlencoded**用来传输简单的数据，大概就是’key1=value1&key2=value2‘这样的格式。**另外一种是传文件，会采用multipart/form-data格式**。**采用后者是因为application/x-www-form-urlencoded的编码方式对于文件这种二进制的数据非常低效**



​	浏览器在POST一个表单时，url上也可以携带参数，只要<form action='url'>里的url带querystring就行。只不过表单里的那些用<input>等标签经过用户操作产生的数据都会在body里



​	因此我们一般会**泛泛的说’GET请求没有body只有url，请求数据放在querystring中；POST请求的数据在body中’**，但是！！！**这种情况仅仅限于浏览器发请求的场景！**